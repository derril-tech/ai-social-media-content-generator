# NATS Server Configuration for AI Social Media Content Generator

# Server
server_name: ai-social-media-nats
listen: 0.0.0.0:4222
http: 0.0.0.0:8222

# Authorization
authorization {
  users: [
    {
      user: nats_user
      password: nats_password
    }
  ]
}

# Cluster (for development - single node)
cluster {
  listen: 0.0.0.0:6222
  routes: []
}

# Logging
logtime: true
debug: false
trace: false

# Limits
max_connections: 1000
max_subscriptions: 10000
max_payload: 1MB

# JetStream (for persistent streams and queues)
jetstream {
  store_dir: /data/jetstream
  max_memory_store: 256MB
  max_file_store: 1GB
}

# Streams configuration
streams {
  # Brief generation stream
  brief.* {
    subjects: ["brief.create", "brief.update", "brief.delete"]
    retention: limits
    max_age: 7d
    storage: file
    replicas: 1
  }

  # Generation stream
  gen.* {
    subjects: ["gen.request", "gen.complete", "gen.failed"]
    retention: limits
    max_age: 1d
    storage: file
    replicas: 1
  }

  # Policy check stream
  policy.* {
    subjects: ["policy.check", "policy.approved", "policy.rejected"]
    retention: limits
    max_age: 1d
    storage: file
    replicas: 1
  }

  # Publishing stream
  publish.* {
    subjects: ["publish.request", "publish.success", "publish.failed"]
    retention: limits
    max_age: 7d
    storage: file
    replicas: 1
  }

  # Metrics stream
  metrics.* {
    subjects: ["metrics.ingest", "metrics.processed"]
    retention: limits
    max_age: 30d
    storage: file
    replicas: 1
  }
}
